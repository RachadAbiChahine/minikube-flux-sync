---
apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: pgwatch2
  namespace: monitoring
  annotations:
    fluxcd.io/automated: "false"
    fluxcd.io/tag.chart-image: semver:~4.0
spec:
  releaseName: pgwatch2
  chart:
    repository:  https://raw.githubusercontent.com/RachadAbiChahine/helm-charts-repo/master/
    name: pgwatch2
    version: 0.1.5
  values:
    persistentVolumes:
      database:
        size: 2Gi
    env:
      PW2_IHOST: influxdb.minikube.local
      PW2_IPORT: 80
      PW2_IPASSWORD: minikube
      PW2_IUSER: minikube
      PW2_IDATABASE: minikube
      PW2_WEBNOANONYMOUS: true
      PW2_WEBUSER: admin
      PW2_WEBPASSWORD: admin
      PW2_TESTDB: false
      PW2_GRAFANAUSER: admin
      PW2_GRAFANAPASSWORD: admin
      PW2_GRAFANANOANONYMOUS: true
    ingress:
      ingress:
        annotations: {}

        adm:
          enabled: true
          tls: []
            #  - secretName: chart-example-tls
          #    host:
          #      - chart-example.local
          # kubernetes.io/ingress.class: nginx
          # kubernetes.io/tls-acme: "true"
          host: pgwatch2.minikube.local

        grafana:
          host: grafana-pw2.minikube.local
          enable: true
          tls: []
            #  - secretName: chart-example-tls
          #    host:
          #      - chart-example.local
          # kubernetes.io/ingress.class: nginx
          # kubernetes.io/tls-acme: "true"



